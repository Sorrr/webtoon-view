window.rdg||(rdg={}),rdg.view=rdg.view||{},rdg.view.Scroller=function(){this.init.apply(this,arguments)},rdg.view.Scroller.prototype={init:function(a){this._selector=a||"#webtoon-view",this._pastY=0,this._oldY=0,this._events={scrollTop:[],scrollUp:[],scrollBottom:[],scrollDown:[]},this._buildIScroll(),this._bindEvents(),navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&$("html").addClass("ipad ios7")},on:function(a,b){this._events[a].push(b)},off:function(a,b){var c,d;for(c=0,d=this._events[a].length;d>c;c++)this._events[a][c]===b&&this._events[a].splice(c,1)},refresh:function(){this._iscroll.refresh()},_buildIScroll:function(){var a={probeType:2,scrollbars:!0,useTransform:Modernizr.csstransforms,useTransition:Modernizr.csstransitions,fadeScrollbars:!1,shrinkScrollbars:!1};Modernizr.csstransforms3d&&(a.fadeScrollbars=!0),/iphone|ipad|ipod/i.test(navigator.userAgent)&&(a.shrinkScrollbars="scale"),this._iscroll=new IScroll(this._selector,a)},_bindEvents:function(){this._iscroll.on("scroll",$.proxy(this._onScrollFireEvent,this)),this._iscroll.on("scrollEnd",$.proxy(this._onScrollEndFireEvent,this))},_onScrollFireEvent:function(){this._isTop()?this._fireEvent("scrollTop"):this._isScrollUp()&&this._isSufficient()?this._fireEvent("scrollUp"):this._isBottom()?this._fireEvent("scrollBottom"):this._isScrollDown()&&this._fireEvent("scrollDown"),this._pastY=this._iscroll.y},_onScrollEndFireEvent:function(){this._oldY=this._iscroll.y,this._isTop(this._oldY)?this._fireEvent("scrollTop"):this._isBottom(this._oldY)&&this._fireEvent("scrollBottom")},_isTop:function(a){return a=void 0===a?this._pastY:a,a>=0},_isBottom:function(a){return a=void 0===a?this._pastY:a,a<=this._iscroll.maxScrollY},_isScrollUp:function(){return this._iscroll.y>this._pastY&&this._iscroll.y>this._oldY},_isScrollDown:function(){return this._iscroll.y<this._pastY&&this._iscroll.y<this._oldY},_isSufficient:function(){return this._iscroll.y>this._oldY- -150},_fireEvent:function(a){var b,c,d=this._events[a];for(b=0,c=d.length;c>b;b++)d[b](this._iscroll)}},rdg.view.Sidebars=function(){this.init.apply(this,arguments)},rdg.view.Sidebars.STATUS={SHOW:0,HIDE:1},rdg.view.Sidebars.prototype={init:function(){this._welHeader=null,this._welFooter=null,this._hideTimer=0,this._showTimer=0,this._status=0,this._assignElements()},_assignElements:function(){this._welHeader=$("header"),this._welFooter=$("footer")},hide:function(){if(this._status===rdg.view.Sidebars.STATUS.HIDE)return!1;var a=this;this._welHeader.addClass("hide"),this._welFooter.addClass("hide"),this._status=rdg.view.Sidebars.STATUS.HIDE,clearTimeout(this._showTimer),this._hideTimer=setTimeout(function(){a._welHeader.css("visibility","hidden"),a._welFooter.css("visibility","hidden")},300)},show:function(){if(this._status===rdg.view.Sidebars.STATUS.SHOW)return!1;var a=this;this._welHeader.css("visibility","visible"),this._welFooter.css("visibility","visible"),this._status=rdg.view.Sidebars.STATUS.SHOW,clearTimeout(this._hideTimer),this._showTimer=setTimeout(function(){a._welHeader.removeClass("hide"),a._welFooter.removeClass("hide")},100)},delayHide:function(a){var b=this;a=a||0,setTimeout(function(){b.hide()},a)},delayShow:function(a){var b=this;a=a||0,setTimeout(function(){b.show()},a)}};